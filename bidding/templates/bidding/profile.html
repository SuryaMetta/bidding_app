{% extends 'bidding/base.html' %}

{% block content %}
    <div class="profile-container" style="
        max-width: 600px;
        margin: 50px auto;
        padding: 30px;
        background: #1A1A40;
        border-radius: 15px;
        box-shadow: 0 0 20px rgba(157, 78, 221, 0.7);
        color: #E0AAFF;
    ">
        <h2 class="welcome-message" style="
            text-align: center;
            margin-bottom: 30px;
            color: #E0AAFF;
            text-shadow: 0 0 15px #9D4EDD;
        ">
            Welcome, {{ user.username }}!
        </h2>

        <!-- Profile Picture Display -->
        <div class="profile-section" style="text-align: center; margin-bottom: 30px;">
            {% if user_profile.profile_picture %}
                <img src="{{ user_profile.profile_picture.url }}" 
                     alt="Profile Picture" 
                     class="profile-pic" 
                     style="
                        width: 150px;
                        height: 150px;
                        border-radius: 50%;
                        border: 4px solid #9D4EDD;
                        box-shadow: 0 0 20px rgba(157, 78, 221, 0.8);
                     ">
            {% else %}
                <p class="no-picture" style="
                    color: #9D4EDD;
                    font-style: italic;
                ">
                    No profile picture yet.
                </p>
            {% endif %}
        </div>

        <!-- Profile Update Form -->
        <div class="form-section" style="margin-bottom: 30px;">
            <h3 style="text-align: center; color: #E0AAFF;">Update Profile Picture & Details</h3>
            <form method="post" enctype="multipart/form-data" class="form-style" style="
                display: flex;
                flex-direction: column;
                gap: 15px;
            ">
                {% csrf_token %}
                {{ profile_form.as_p }}
                <button type="submit" name="update_profile" class="btn-update" style="
                    background-color: #7209B7;
                    color: #9D4EDD;
                    border: none;
                    padding: 12px;
                    border-radius: 8px;
                    cursor: pointer;
                    transition: background 0.3s ease, transform 0.3s ease;
                "
                onmouseover="this.style.backgroundColor='#4CC9F0'; this.style.transform='scale(1.05)';"
                onmouseout="this.style.backgroundColor='#7209B7'; this.style.transform='scale(1)';">
                    Update Profile
                </button>
            </form>
        </div>

        <hr class="divider" style="
            border: 1px solid #9D4EDD;
            box-shadow: 0 0 15px rgba(157, 78, 221, 0.7);
            margin: 30px 0;
        ">

        <!-- Change Password Form -->
        <div class="form-section">
            <h3 style="text-align: center; color: #E0AAFF;">Change Password</h3>
            <form method="post" class="form-style">
                {% csrf_token %}
                {{ password_form.as_p }}
                <button type="submit" name="change_password" class="btn-password" style="
                    background-color: #4361EE;
                    color: #9D4EDD;
                    border: none;
                    padding: 12px;
                    border-radius: 8px;
                    cursor: pointer;
                    transition: background 0.3s ease, transform 0.3s ease;
                "
                onmouseover="this.style.backgroundColor='#4CC9F0'; this.style.transform='scale(1.05)';"
                onmouseout="this.style.backgroundColor='#4361EE'; this.style.transform='scale(1)';">
                    Change Password
                </button>
            </form>
        </div>
    </div>
{% endblock %}
